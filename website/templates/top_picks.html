{% extends 'base.html' %}
{% load static %}
{% block content %}
{% include 'navbar.html' %}
<!-- Updated HTML -->
<div class="recommendation-section">
    <!-- Movies Section -->
    <h1 class="section-title">Recommendations Based on Your MBTI Preferences</h1>
    <h2 class="section-subtitle">Movies</h2>
    <div class="movie-carousel">
        {% for movie in movies %}
        <div class="movie-card">
            <img src="{% static movie.image %}" class="movie-image" alt="{{ movie.title }}">
            <div class="movie-info">
                <h5 class="movie-title">{{ movie.title }}</h5>
                <p class="movie-description">{{ movie.description|truncatewords:15 }}</p>
                <!-- Add to Watchlist Button -->
                <form action="{% url 'add_to_watchlist' movie.movie_id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit" class="movie-details-btn">Add to Watchlist</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Books Section -->
    <h2 class="section-subtitle">Books</h2>
    <div class="book-carousel">
        {% for book in books %}
        <div class="book-card">
            <img src="{% static book.image %}" class="book-image" alt="{{ book.title }}">
            <div class="book-info">
                <h5 class="book-title">{{ book.title }}</h5>
                <p class="book-description">{{ book.description|truncatewords:15 }}</p>
                <!-- Add to Readlist Button -->
                <form action="{% url 'add_to_readlist' book.book_id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit" class="book-details-btn">Add to Readlist</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    /* General Styling */
    body {
        background: linear-gradient(180deg, #e9e4f0, #fefeff);
        font-family: 'Arial', sans-serif;
    }

    /* Section Titles */
    .section-title {
        font-size: 2.8em;
        font-weight: 700;
        text-align: center;
        margin-top: 30px;
        color: #5e478c;
        text-shadow: 1px 1px 2px #d6c8f0;
    }

    .section-subtitle {
        font-size: 2.2em;
        font-weight: 600;
        text-align: center;
        margin-top: 50px;
        color: #6b5587;
    }

    /* Carousel Container */
    .movie-carousel, .book-carousel {
        display: flex;
        gap: 20px;
        overflow-x: auto; /* Enables horizontal scrolling */
        scroll-behavior: smooth; /* Smooth scrolling on user interaction */
        padding: 20px;
    }

    .movie-carousel::-webkit-scrollbar,
    .book-carousel::-webkit-scrollbar {
        height: 10px; /* Horizontal scrollbar height */
    }

    .movie-carousel::-webkit-scrollbar-thumb,
    .book-carousel::-webkit-scrollbar-thumb {
        background: #9e80cf; /* Thumb color */
        border-radius: 10px;
    }

    .movie-carousel::-webkit-scrollbar-track,
    .book-carousel::-webkit-scrollbar-track {
        background: #f6f0fc; /* Track color */
    }

    /* Card Styling */
    .movie-card, .book-card {
        flex: 0 0 auto; /* Ensure cards are fixed width and stack horizontally */
        width: 280px;
        background: linear-gradient(145deg, #f3eaff, #dcd5e7);
        border-radius: 12px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        transition: transform 0.4s, box-shadow 0.4s;
    }

    .movie-card:hover, .book-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.25);
    }

    .movie-image, .book-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-top-left-radius: 12px;
        border-top-right-radius: 12px;
    }

    .movie-info, .book-info {
        padding: 15px;
        text-align: center;
    }

    .movie-title, .book-title {
        font-size: 1.4em;
        font-weight: 600;
        margin-bottom: 10px;
        color: #4a306d;
    }

    .movie-description, .book-description {
        font-size: 1em;
        color: #6d5e89;
    }

    .movie-details-btn, .book-details-btn {
        background-color: #9e80cf;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        margin-top: 15px;
        transition: background-color 0.3s;
    }

    .movie-details-btn:hover, .book-details-btn:hover {
        background-color: #7a58b3;
    }

    /* Modal Styling */
    .modal-content {
        background: #f6f0fc;
        border-radius: 12px;
    }

    .modal-header, .modal-body {
        text-align: center;
        color: #4a306d;
    }

    .modal-img {
        width: 100%;
        height: auto;
        border-radius: 12px;
        margin-bottom: 15px;
    }
</style>

{% endblock %}
